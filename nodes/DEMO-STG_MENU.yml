fileVersion: 1
id: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
name: STG_MENU
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: ""
  isMultisource: false
  locationName: DEMO
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0bcf5484-c30f-489e-b3c4-cd20c5ef0c76
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: NUMBER(19,0)
        description: ""
        name: MENU_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: f63e2a93-2fbe-4c17-8443-234ffe8033a0
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d859e72c-3acf-4d80-b2fe-ba92cc53d3f8
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: NUMBER(38,0)
        description: ""
        name: MENU_TYPE_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 68824d5b-7572-465e-9047-068116a9247f
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 0ff122a3-bbb0-4029-81a1-9ffabdd57f2a
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: VARCHAR(16777216)
        description: ""
        name: MENU_TYPE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 01d23d41-824e-4741-9475-42933554957c
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 229bfab8-fc22-45c6-aa6b-a25c93028680
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: VARCHAR(16777216)
        description: ""
        name: TRUCK_BRAND_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: a37e60fa-1958-4e83-8917-e6a4f0010873
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 18791acc-1b21-42a3-b363-63adeec5e2f9
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: NUMBER(38,0)
        description: ""
        name: MENU_ITEM_ID
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: d2c855b9-43cd-425a-a9d8-1d2823f4a4ce
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e613f8c4-bec1-4049-81a7-224907414ece
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: VARCHAR(16777216)
        description: ""
        name: MENU_ITEM_NAME
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e54e7906-2a31-468e-aa0d-6f9477515502
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e4b64dc2-598b-43e9-b9ed-8b7807904b2f
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: VARCHAR(16777216)
        description: ""
        name: ITEM_CATEGORY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: dc9c3641-a216-46e6-a558-17625173023f
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 6b791a9a-9fda-4ff3-89f1-a769a40fe08f
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: VARCHAR(16777216)
        description: ""
        name: ITEM_SUBCATEGORY
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fc047a74-2266-4611-a74e-865a8d398791
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 76f25428-ef60-479e-a2b3-ca20a69dfb8c
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: NUMBER(38,4)
        description: ""
        name: COST_OF_GOODS_USD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 5a3505ea-65b6-4d26-b6f4-b296724b43bc
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f1206388-589a-440c-b1eb-d764beecb33e
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: NUMBER(38,4)
        description: ""
        name: SALE_PRICE_USD
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: aef15ffb-d654-435b-9ce3-2254b36322a2
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 64f41fbb-f843-4f6c-8c92-2dc7a3ea7db0
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: VARIANT
        description: ""
        name: MENU_ITEM_HEALTH_METRICS_OBJ
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 82fa4bb0-324f-45c8-885c-eb939314eae1
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: ""
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: de3d36ea-4949-4da7-a4dc-8f6962e78360
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: STRING
        description: ""
        name: INGREDIENTS
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 82fa4bb0-324f-45c8-885c-eb939314eae1
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: "\"MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics_ingredients\".value::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 9a10c853-c2eb-45b7-b6a2-ff7960135ff0
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: STRING
        description: ""
        name: IS_DAIRY_FREE_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 82fa4bb0-324f-45c8-885c-eb939314eae1
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: "\"MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics\".value:\"is_dairy_free_flag\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 6c2181b8-2f5f-4e6b-bd9d-a10b50088526
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: STRING
        description: ""
        name: IS_GLUTEN_FREE_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 82fa4bb0-324f-45c8-885c-eb939314eae1
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: "\"MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics\".value:\"is_gluten_free_flag\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: d6c99a08-d77f-4c03-acf9-9bcb55a8be7e
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: STRING
        description: ""
        name: IS_HEALTHY_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 82fa4bb0-324f-45c8-885c-eb939314eae1
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: "\"MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics\".value:\"is_healthy_flag\"::STRING"
      - acceptedValues:
          strictMatch: true
          values: []
        appliedColumnTests: {}
        columnReference:
          columnCounter: 0067eb4a-950d-487d-9157-8ff8988cf547
          stepCounter: bc11c0d2-bd01-4cf5-97cc-0a2f29a0d240
        config: {}
        dataType: STRING
        description: ""
        name: IS_NUT_FREE_FLAG
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 82fa4bb0-324f-45c8-885c-eb939314eae1
                stepCounter: f4841f68-5425-4d22-9778-3ce15356c365
            transform: "\"MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics\".value:\"is_nut_free_flag\"::STRING"
    cteString: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases: {}
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: POS
            nodeName: MENU
        join:
          joinCondition: |-
            FROM {{ ref('POS', 'MENU') }} "MENU", 
            lateral flatten(input => "MENU_ITEM_HEALTH_METRICS_OBJ":"menu_item_health_metrics", OUTER => TRUE) "MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics", 
            lateral flatten(input => "MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics".value:"ingredients", OUTER => TRUE) "MENU_ITEM_HEALTH_METRICS_OBJ_menu_item_health_metrics_ingredients"
        name: STG_MENU
        noLinkRefs: []
  name: STG_MENU
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
